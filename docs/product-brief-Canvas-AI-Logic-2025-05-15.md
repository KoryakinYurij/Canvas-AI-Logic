# Product Brief: Canvas-AI-Logic

**Date:** 2025-05-15
**Author:** BMad
**Context:** Greenfield Project (Interactive AI Canvas)

---

## Executive Summary

The **Interactive AI Canvas** is an intelligent knowledge mapping tool that transforms unstructured user input (text, ideas, documents) into structured, visual knowledge graphs. Unlike traditional diagramming tools, it leverages AI to automatically generate nodes and edges, organizing them into a logical and aesthetic layout. The system employs a multi-layered architecture (Clean Architecture + Atomic Design) to ensure scalability, modularity, and separation of concerns between the UI, business logic, and AI integration. This allows users to interactively refine the graph through dialogue with the AI, making it a powerful tool for brainstorming, knowledge management, and complex system visualization.

---

## Core Vision

### Problem Statement

Users often struggle to structure complex ideas, notes, or documents into a coherent visual representation. Manual diagramming is time-consuming, and existing tools rarely bridge the gap between "messy thoughts" and "structured diagrams" automatically. Users need a way to dump information and immediately see it organized visually, with the ability to refine it iteratively.

### Proposed Solution

An interactive canvas where:
1.  **Input:** Users provide text, documents, or ideas.
2.  **AI Processing:** An AI Connector (Infrastructure Layer) analyzes the input and generates a graph structure (nodes and edges).
3.  **Visualization:** A Widget Layer calculates an optimal layout (using algorithms like Dagre/Elkjs) and a Presentation Layer renders the graph using Atomic Design principles.
4.  **Interaction:** Users can converse with the AI to modify, expand, or refine the graph.

### Key Differentiators

*   **AI-First Generation:** The graph is primarily generated by AI from unstructured data, not manually drawn node-by-node.
*   **Layered Architecture:** The system is built for scale and maintainability, with strict separation between the "dumb" UI (Atoms/Molecules), the "smart" Widget layer, the Domain logic (Node Entities), and the AI integration.
*   **Interactive Refinement:** It's not a static output; it's a living canvas modifiable through natural language.

---

## Target Users

### Primary Users

*   **Knowledge Workers & Researchers:** People who need to organize vast amounts of information.
*   **System Architects & Developers:** For visualizing complex systems (like the architecture of this very project).
*   **Product Managers:** For mapping out user flows, feature sets, and roadmaps.

### User Journey

1.  User opens the application.
2.  User types "Create a sales funnel diagram" or pastes a project brief.
3.  AI processes the request and the system renders a visual graph with properly connected nodes.
4.  User says "Add a step for 'Follow-up Email' after 'Lead Capture'".
5.  The system updates the graph model and re-renders the layout instantly.

---

## Success Metrics

### Key Performance Indicators

*   **Time-to-Visualization:** How quickly can a user go from "text dump" to "structured graph"?
*   **User Retention:** Frequency of return visits for refining diagrams.
*   **Graph Complexity:** Ability to handle large graphs (100+ nodes) without performance degradation (addressed by Virtualization in the Widget Layer).

---

## MVP Scope

### Core Features

1.  **AI Graph Generation:** Convert text input to a node/edge graph via OpenAI/Claude API.
2.  **Canvas Visualization:** Render nodes and edges with auto-layout (Dagre/Elkjs).
3.  **Interactive Chat:** Interface to send follow-up commands to the AI.
4.  **Basic Node Types:** Support for generic nodes with customizable headers and bodies (using the `VisualNodeCard` organism).
5.  **Clean Architecture Foundation:** Implementation of the 4-layer architecture to ensure future scalability.

### Out of Scope for MVP

*   Real-time multi-user collaboration.
*   Export to varying formats (PDF, SVG) - basic export is fine, but advanced is later.
*   Custom user-defined node templates (beyond the standard provided set).

### Future Vision

*   **Plugin System:** Allow third-party renderers for specific node types.
*   **Deep Integration:** Connect to external data sources (Notion, Jira) to auto-generate graphs.

---

## Technical Preferences

### Architecture

*   **Presentation Layer:** Atomic Design (Atoms, Molecules, Organisms). React-based.
*   **Widget Layer:** Smart Components (`NodeContainer`, `CanvasWidget`) and Layout Engines.
*   **Domain Layer:** Business Logic, Node Entities, Graph Model (JSON).
*   **Infrastructure Layer:** AI Connector (OpenAI/Claude).

### Technology Stack

*   **Frontend:** React (implied by component names like `NodeContainer`), potentially Next.js or Vite.
*   **State Management:** Needed for the Graph Model (e.g., Zustand, Redux, or React Context).
*   **Layout Libraries:** Dagre, Elkjs, or React Flow (as a base, though the architecture implies building a custom widget layer over a layout engine).

---

_This Product Brief captures the vision and requirements for Canvas-AI-Logic._

_It was created through collaborative discovery and reflects the unique needs of this Greenfield Project._

_Next: Use the PRD workflow to create detailed product requirements from this brief._
